# 🌿 中医智能小助手 (zhongyi AI Assistant)

> **[🔥 点击体验在线演示](https://zhongyiai-dldz8ovyrgyqwrgidexco3.streamlit.app/)**  
> *基于大语言模型的中医问诊与养生调理助手*

## 📖 项目简介

“中医智能小助手”是一款模拟专业中医师问诊流程的 AI 应用。它通过多轮对话收集用户症状，运用中医辨证逻辑进行分析，最终生成包含**深度辨证、食疗方、穴位按跷、起居禁忌**等在内的低成本、可落地的养生方案。


---

## 💡 产品设计思路

在设计本产品时，我重点聚焦用户体验（UX）与中医问诊实际场景的深度融合，没有盲目追求功能复杂，而是围绕“好用、贴心、安全”三个核心，落地到以下三个具体维度：

### 1. 用户体验优先
*   **简化问诊流程**：首页提供高频症状快捷入口（睡不着 / 掉头发 / 手脚凉 / 胃胀气），降低用户输入门槛。
*   **混合输入模式**：考虑到用户打字可能不便，或对症状描述不清，系统会根据 AI 的提问，**智能预判生成 3 个选项按钮**（如“睡不着|盗汗|都有”）。用户既可以自由输入，也可以“一键选择”，极大提升了交互流畅度。
*   **等待体验优化**：报告生成时引导用户查看左侧「养生锦囊」，利用等待时间获取实用知识，提升整体使用感受。

### 2. 情绪价值与碎片化体验
*   **养生锦囊（辅助模块）**：在侧边栏设计了“随机养生知识”模块。在用户思考回答或等待 AI 生成报告的间隙，提供“晨起一杯水”、“子时大睡”等碎片化知识，缓解等待焦虑，增强产品的趣味性和陪伴感。
*   **温和的语言风格**：通过 Prompt 严格约束 AI 的语气，全程使用“您”、禁止西医术语，尽量贴近“老中医”问诊时的温和、亲切，让用户在交流中更有安全感。

### 3. 闭环式服务流程
*   **智能收尾机制**：没有采用机械的固定轮次问诊模式，而是设计了“智能判断”逻辑——只要AI认为收集到的信息足够辨证，或者用户主动点击“生成报告”，就会立即输出诊断结果，不会让用户进行多余的问答，节省时间。
*   **结果追问引导**：诊断报告不是产品价值终点。报告生成后，系统提供“七日食谱”、“详细忌口”、“更多穴位”等追问按钮，同时用户也可以通过对话框输入追问问题，满足用户对特定领域的深挖需求。

### 🚀 风险控制
*   **多处添加免责声明**：明确标注「本产品仅为技术演示，不替代专业医疗诊断」，避免用户误解，引导用户在必要时寻求专业医生帮助。

*   **安全方案设计**：食疗方选用常见食材，穴位优先选择四肢躯干等安全部位，杜绝高风险操作，保障用户使用安全。

### 🚀 待开发迭代构想 (Roadmap)
*   **多模态诊断**：接入多模态大模型，增加“舌诊分析”和“面诊分析”等功能，用户上传照片即可辅助辨证。
*   **个性化档案建立**：引入数据库，记录用户的历史问诊记录，分析体质变化趋势。
*   **语音交互适配**：考虑到中医养生受众包含大量中老年群体，未来计划增加语音输入与播报功能。



---

## 🛠️ 技术选型理由

本项目选用 **Python + Streamlit + ZhipuAI (GLM-4)** 作为核心技术栈，主要基于以下三点考量，兼顾开发效率、场景适配性和部署便捷性：

1.  **开发效率与敏捷迭代（Streamlit）**：
    *   项目开发时间有限，需要快速从 0 到 1 构建原型。Streamlit 允许纯 Python 编写前端，免去了 HTML/CSS/JS 的繁琐配置，能够让我把 80% 的精力集中在**Prompt Engineering**和**业务逻辑**上。同时，Streamlit自带的**chat_message**和**session_state**组件，天生适配对话类应用，刚好契合中医AI问诊的场景，不用额外开发对话交互模块。

2.  **中文医疗语境理解（ZhipuAI / GLM-4）**：
    *   中医领域包含大量古文引用（如《黄帝内经》）和晦涩术语（如“阴虚火旺”、“肝郁气滞”）。相比于国外模型，国产的 GLM-4 模型在中文古籍理解和中医逻辑推理上表现更优，能生成更地道、准确的诊断报告。

3.  **云端部署便捷性**：
    *   Streamlit Community Cloud 提供了免费且一键部署的方案，不需要复杂的部署配置，完成开发后直接推送代码就能实现云端部署，生成可直接访问的链接，方便面试官和用户快速体验产品，降低了部署和分享的成本。

---

## 🧠 快速学习与 Prompt 设计心得

作为一个非中医专业背景的开发者，要在短时间内掌握中医问诊核心逻辑，并转化为可落地的产品功能，我主要通过以下两个路径推进，确保产品贴合中医场景、功能可用：

1.  **借助AI快速构建中医知识图谱**：
    *  借助AI作为辅助学习工具，快速梳理中医“八纲辨证”（阴阳、表里、寒热、虚实）的基础逻辑，明确问诊的核心维度和关键问题，避免出现专业常识错误。同时，调研市面上主流的中医体质测试问卷，提炼出用户高频提及的症状和核心问诊问题，比如怕冷、口干、口苦等，确保产品问诊环节贴合用户实际需求，不脱离中医问诊的核心逻辑。

2.  **结构化 Prompt 工程，规范AI输出**：
    *   **角色沉浸**：在 System Prompt 中强制 AI 扮演“经验丰富的主任医师”，并设定“严禁使用西医术语”的负向约束，，确保AI的回复贴合“老中医”的形象，传递亲切感。
    *   **思维链（CoT）应用**：要求 AI 在输出报告时，必须遵循“症状 -> 病机 -> 体质 -> 方案”的推理路径，不出现逻辑混乱、前后矛盾的情况，提升诊断报告的可信度。
    *   **格式控制**：为了保证 Streamlit 渲染美观，我严格定义了输出的 Markdown 模板（如必须包含 `### 🩺 深度辨证` 等标题），这让非结构化的 AI 回复变得整洁可读，，提升用户体验。

---

## 📂 项目结构与安装

### 文件结构
```text
📦 zhongyi_AI
 ┣ 📜 app.py                # 项目主程序入口
 ┣ 📜 requirements.txt      # 依赖库列表 
 ┗ 📂 .streamlit            # 配置文件夹
   ┗ 📜 secrets.toml        # 存放智谱 API Key

```
## 本地运行步骤

### 前置条件
*   **Python 3.8+**
*   **智谱 AI API_KEY**：https://open.bigmodel.cn/


### 1. 克隆仓库
```
git clone https://github.com/hetaosu987/zhongyi_AI.git
cd zhongyi_AI
```
### 2. 安装依赖
建议创建一个新的 Python 虚拟环境 (Python 3.8+)：
```
pip install -r requirements.txt
```

### 3. 配置 API Key
本项目使用智谱 AI (ChatGLM) 的 API。
在项目根目录下创建一个 .streamlit 文件夹，并在其中新建 secrets.toml 文件：
```
# .streamlit/secrets.toml
API_KEY = "你的_智谱AI_API_KEY_粘贴在这里"# 请在智谱 AI 平台申请 API Key
```

### 4. 启动应用
```
streamlit run app.py
```

启动成功后，浏览器将自动打开本地地址。后续可在*https://streamlit.io/#install*一键部署。
